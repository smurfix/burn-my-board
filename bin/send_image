#!/bin/bash

source helper/common

usage() {
    cat <<'___'
Usage: send_image

Sends an image to the device, possibly without building it 1:1 locally.
___
    exit 1
}

ROOT_IMG=
if test -z "$1" ; then
    :
elif test "$1" = "-" ; then
    shift
else
    ROOT_IMG="$1"
    shift
fi

BOOT_IMG=
if test -z "$1" ; then
    :
elif test "$1" = "-" ; then
    shift
else
    BOOT_IMG="$1"
    shift
fi

source snips/rock/partinfo_upload

bin/make_loader $T/bootimg

source snips/rock/send_image

